# ============================================================
# RAILWAY DEPLOYMENT COMMANDS - RUN THESE IN YOUR TERMINAL
# ============================================================
# Copy and paste these commands one by one
# ============================================================

# Step 1: Initialize Railway project
railway init
# When prompted:
#   - Select: Empty Project
#   - Enter name: bitbasel-backend

# Step 2: Add PostgreSQL database
railway add --database postgresql

# Step 3: Set all environment variables (copy this entire block)
railway variables set SECRET_KEY="0B1rytrChkzawGjS3vAPAVV8-Yht9LGI5tyBhLl3xFA"
railway variables set QR_SECRET_SALT="K1_p7MkQjtEdeXAKIPgoqdtae3nNWgh7gw5Baqp6Npg"
railway variables set ALGORITHM="HS256"
railway variables set ACCESS_TOKEN_EXPIRE_MINUTES="30"
railway variables set REFRESH_TOKEN_EXPIRE_DAYS="7"
railway variables set UPLOAD_DIR="uploads"
railway variables set MAX_FILE_SIZE="10485760"
railway variables set APPLE_TEAM_ID="GDZ9V6T9SF"
railway variables set APPLE_KEY_ID="5Y3L2S8R8R"
railway variables set APPLE_CLIENT_ID="com.bitbasel.app"
railway variables set APPLE_REDIRECT_URI="https://bitbasel.app/auth/callback"
railway variables set APPLE_PRIVATE_KEY_BASE64="LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JR1RBZ0VBTUJNR0J5cUdTTTQ5QWdFR0NDcUdTTTQ5QXdFSEJIa3dkd0lCQVFRZ1A3RUJqb2orOUp2K3FZNDcKZ1g4Kzg1T0JZejYyMDNMWEhDYjJ2djNCNUJLZ0NnWUlLb1pJemowREFRZWhSQU5DQUFTUzJkN3AwcGtEUUJzaQp1QmZGVzBjdWhlK3c1bFRwZ1pzSGZTd0xKMFp6NElBdTJvQ1RtR0RwMVhNb1MzTVVBQlgzNGdqeFBLWFhoUTBkCnBaRUNYSU5QCi0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K"
railway variables set BASEL_LAT="25.7907"
railway variables set BASEL_LON="-80.1300"
railway variables set BASEL_RADIUS_KM="5"
railway variables set GOOGLE_MAPS_API_KEY="YOUR_GOOGLE_MAPS_API_KEY"
railway variables set GROQ="YOUR_GROQ_API_KEY"

# Step 4: Deploy the application
railway up

# Step 5: Generate public domain
railway domain

# Step 6: View deployment logs
railway logs --tail 100

# Step 7: Open Railway dashboard (to add volume)
railway open

# ============================================================
# AFTER DEPLOYMENT - Add Volume via Dashboard:
# 1. Click your service
# 2. Go to "Volumes" tab
# 3. Click "+ New Volume"
# 4. Mount Path: /app/uploads
# 5. Size: 1 GB
# 6. Click "Add"
# ============================================================

# Test your deployment
# Replace YOUR_DOMAIN with actual domain from step 5
curl https://YOUR_DOMAIN.railway.app/health
curl https://YOUR_DOMAIN.railway.app/
